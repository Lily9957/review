### OSI七层模型

```
应用层、表示层、会话层、传输层、网络层、数据链路层、物理层
```

### TCP/IP五层模型

```
应用层：TFTP、HTTP、SNMP、FTP、SMTP、DNS、Telnet
传输层：TCP、UDP
网络层：IP、ICMP、RIP、OSPF、BGP、IGMP
数据链路层：SLIP、CSLIP、PPP、ARP、RARP、MUT
物理层
```



### 应用层的协议哪些是基于TCP协议，哪些是基于UDP协议

**基于TCP协议**

```
FTP协议(文件传输协议)：定义了文件传输协议，使用21端口

TELENT(远程登录协议)：一种用于远程登录的端口，使用23端口，用户可以以自己的身份远程连接到计算机上，可提供DOS模式下的通信服务

SMTP(简单邮件传输协议)：邮件传送协议，用于发送邮件。服务器开放的端口是25号端口

POP3(邮件读取协议)：它是和SMTP对应，POP3用于接收邮件。POP3协议所用的是110端口。

HTTP(超文本传输协议)：是从web服务器传输超文本到本地浏览器的传送协议，他使用的端口是80

HTTPS(超文本传输安全协议)：他使用的端口是443
```



**基于UDP协议**

```
TFTP(简单文本传输协议)：该协议在熟知端口69上使用UDP服务

SNMP(简单网络管理协议)：使用161号端口，是用来管理网络设备的。由于网络设备很多，无连接的服务就体现出其优势

BOOTP(引导程序协议，DHTP的前身)：应用于无盘设备

DHCP(动态主机配置协议)：是一个局域网的网络协议

RIP(路由信息协议)：基于距离矢量算法的路由协议，利用跳数来作为计算标准。

IGMP(Internet组管理协议)
```



**基于TCP和UDP协议**

```
DNS(域名系统)：DNS区域传输的时候使用TCP协议。域名解析时用UDP协议。DNS使用的是53号端口
```



### HTTP状态码

```
1XX信息性状态码
    100：继续
    101：切换协议
    
```



```
2XX成功状态码
    200：ok，成功处理了请求
    204：No Content,请求成功，但没有资源科返回
    206：Partial Content 请求资源的某一部分
```



```
3XX重定向状态码
		301：永久性重定向，表示请求的资源已被分配了新的url
		302：临时性重定向，资源的url已临时定位到其他位置
		303：告诉客户端需要用另一个url获取资源
		304：客户端在请求一个文件的时候，发现自己缓存的文件有 Last Modified ，那么在请求中会包含 If Modified Since ，这个时间就是缓存文件的 Last Modified 。因此，如果请求中包含 If Modified Since，就说明已经有缓存在客户端。服务端只要判断这个时间和当前请求的文件的修改时间就可以确定是返回 304 还是 200 。
对于静态文件，例如：CSS、图片，服务器会自动完成 Last Modified 和 If Modified Since 的比较，完成缓存或者更新。但是对于动态页面，就是动态产生的页面，往往没有包含 Last Modified 信息，这样浏览器、网关等都不会做缓存，也就是在每次请求的时候都完成一个 200 的请求。
```



```
4XX客户端错误状态码
		400：表示请求报文中存在语法错误
		401：未授权
		403：服务器拒绝了请求
		404：服务器无法找到所请求的url
```



```
5XX服务器错误状态码
		500：内部服务器错误
		502：错误网关
		503：服务器暂时处于超负载或正在进行停机维护，现在无法处理请求
		504：响应超时
```



### HTTP和HTTPS的区别

​	1、HTTP协议传输的数据是明文传输的，HTTPS是由HTTP和SSL协议构建的可进行加密传输和身份认证的网络协议，安全性更高。

​	2、HTTPS要用到CA证书，功能越大的CA证书，价格越昂贵。

​	3、HTTP和HTTPS的链接方式不一样，使用的端口也不同。http用的80端口，https用的443端口。





### HTTPS协议的工作原理

<img src="/Users/xyz10/Library/Application Support/typora-user-images/image-20211201144713676.png" alt="image-20211201144713676" style="zoom:50%;" />

1、client向server发送请求https://baidu.com，然后连接到server的443端口，发送的信息主要是随机值1和客户端支持的加密算法。

2、server接收到信息之后给予client响应握手信息，包括随机值2和匹配好的协商加密算法，这个加密算法一定是client发送给server加密算法的子集。

3、随即server给client发送第二个响应报文是数字证书。服务端必须要有一套数字证书，可以自己制作，也可以向组织申请。区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面，这套证书其实就是一对公钥和私钥。传送证书，这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间、服务端的公钥，第三方证书认证机构(CA)的签名，服务端的域名信息等内容。

4、客户端解析证书，这部分工作是由客户端的TLS来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。如果证书没有问题，那么就生成一个随即值（预主秘钥）。

5、客户端认证证书通过之后，接下来是通过随机值1、随机值2和预主秘钥组装会话秘钥。然后通过证书的公钥加密会话秘钥。

6、传送加密信息，这部分传送的是用证书加密后的会话秘钥，目的就是让服务端使用秘钥解密得到随机值1、随机值2和预主秘钥。

7、服务端解密得到随机值1、随机值2和预主秘钥，然后组装会话秘钥，跟客户端会话秘钥相同。

8、客户端通过会话秘钥加密一条消息发送给服务端，主要验证服务端是否正常接受客户端加密的消息。

9、同样服务端也会通过会话秘钥加密一条消息回传给客户端，如果客户端能够正常接受的话表明SSL层连接建立完成了。

### HTTP发展史

<img src="/Users/xyz10/Library/Application Support/typora-user-images/image-20211201144909146.png" alt="image-20211201144909146" style="zoom:50%;" />

1、HTTP/1.0

每个TCP连接只能发一个连接，当服务器响应后就会关闭这个链接，下一次请求需要再次建立TCP链接

2、HTTP/1.1

1）、默认采用持久连接，TCP连接，Connection：keep-alive

恢复1.0的连接方式：Connection:close

2）、管道机制，在同一个TCP连接里，允许多个请求同时发送，所有数据通信是有顺序的，如同时发送a,b,c    a先到服务器，开始响应，相应时间很长,10s后开始下一个，队头阻塞。同一时间一个TCP链接只能处理一个请求，采用一问一答形式，上一个请求响应后才能处理下一个请求，chrome浏览器最大支持6个同域的请求，因为chrome支持最大6个TCP链接。

3、HTTP/2.0

1）加了双工模式，服务器也能同时处理多个请求，解决了队头阻塞问题

2）多路复用，没有次序概念

3）服务器推送功能

同域名上的所有通信都在单个链接完成，当链接上可以并行交错的进行请求和响应。



* 为什么1.1不能实现多路复用?

  根本原因是传输方式不同，HTTP/2.0是基于二进制帧的协议，HTTP/1.1是基于文本分割解析的协议。

  在1.1的报文结构里，服务器需要不断地读入字节，直到遇到换行符，处理顺序是串行的。

  在2.0中，以帧为最小数据单位，每个帧都会有表示自己属于哪个流，多个帧组成一个流，多路复用，其实就是一个TCP里存在多条流。



### HTTP缓存机制

<img src="/Users/xyz10/Library/Application Support/typora-user-images/image-20211213114948463.png" alt="image-20211213114948463" style="zoom:50%;" />

https://zhuanlan.zhihu.com/p/58685072
